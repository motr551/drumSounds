<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="./css/style.css">
</head>
<body>


  <div>
    <div class="KeyA">A clap </div>
    <div class="KeyS">S hihat </div>
    <div class="KeyD">D kick </div>
    <div class="KeyF">F openhat </div>
    <div class="KeyG">G boom </div>
    <div class="KeyH">H ride </div>
    <div class="KeyJ">J snare </div>
    <div class="KeyK">K tom </div>
    <div class="KeyL">L tink </div>
  </div>

  <audio class="KeyA" src="./sounds/clap.wav"></audio>
  <audio class="KeyS" src="./sounds/hihat.wav"></audio>
  <audio class="KeyD" src="./sounds/kick.wav"></audio>
  <audio class="KeyF" src="./sounds/openhat.wav"></audio>
  <audio class="KeyG" src="./sounds/boom.wav"></audio>
  <audio class="KeyH" src="./sounds/ride.wav"></audio>
  <audio class="KeyJ" src="./sounds/snare.wav"></audio>
  <audio class="KeyK" src="./sounds/tom.wav"></audio>
  <audio class="KeyL" src="./sounds/tink.wav"></audio>

<script>
  // function called when selected child div completes all transition
  // of format properties of style: div.keyPromote  
  function removeTransition(keyMouseInput) {
    // the div.keyPromote is removed from the key selected
    keyMouseInput.target.classList.remove('keyPromote');
  }

  // The selected audio sound is played and selected key is
  // applied with style keyPromote
  function playSound(keyMouseInput) {
    // select audio to play
    let audioElement;
    // Is it keyboard input
    if (keyMouseInput.code == undefined){
      // No, it is mouse input
      audioElement= 
      document.querySelector('audio.'+keyMouseInput.target.className);
      document.querySelector('div.'+keyMouseInput.target.className)
        .classList.add("keyPromote");  
    } else
    { // Yes it is keyboard input
      audioElement =
        document.querySelector('audio.'+keyMouseInput.code);
      document.querySelector('div.'+keyMouseInput.code)
        .classList.add("keyPromote");  
    }
      if (audioElement == null) return;
      audioElement.currentTime = 0;
      audioElement.play();
  
    // 
  }

  const divKeyElements = document.querySelectorAll('div > div');
  divKeyElements.forEach(divKeyElement =>
    divKeyElement.addEventListener('transitionend', removeTransition));
  divKeyElements.forEach(divKeyElement =>
    divKeyElement.addEventListener('click', playSound));
  window.addEventListener('keydown', playSound);
</script>


</body>
</html>
